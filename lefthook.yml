commit-msg:
  commands:
    validate-message:
      run: |
        msg=$(cat {1})
        if ! echo "$msg" | grep -qE "^(feat|fix|chore|docs|refactor|test|style|perf|ci|build): [a-z]"; then
          echo "Invalid commit message format."
          echo "Expected: type: lowercase message"
          echo "Types: feat, fix, chore, docs, refactor, test, style, perf, ci, build"
          exit 1
        fi
        if echo "$msg" | grep -qiE "(co-authored-by|author:)"; then
          echo "Author information not allowed in commit messages."
          exit 1
        fi

pre-commit:
  parallel: true
  commands:
    lint:
      glob: "*.{js,ts,jsx,tsx,json}"
      run: bunx biome check --write {staged_files}
      stage_fixed: true
    typecheck:
      run: bun run typecheck

pre-push:
  commands:
    test:
      run: bun test
